---
tags:
  - SQL
---

Чтобы оставить в таблице PostgreSQL только первые 15,000 записей и удалить остальные, вы можете использовать следующий подход. Предположим, у вас есть таблица с именем your_table и уникальный идентификатор (например, id), который можно использовать для определения порядка записей.

Вот пример SQL-запроса для выполнения этой задачи:

```sql
DELETE FROM your_table
WHERE id NOT IN (
    SELECT id
    FROM your_table
    ORDER BY id
    LIMIT 15000
);
```

▎Пояснение:

1. Вложенный запрос: SELECT id FROM your_table ORDER BY id LIMIT 15000 выбирает первые 15,000 записей из таблицы, сортируя их по id.

2. Удаление: Внешний запрос удаляет все записи, у которых id не входит в список первых 15,000.

▎Важные моменты:

• Убедитесь, что у вас есть резервная копия данных перед выполнением операции удаления.

• Если в вашей таблице нет уникального идентификатора или если порядок записей важен, возможно, вам нужно будет использовать другой способ сортировки (например, по дате создания или другому полю).

• Если ваша таблица большая, выполнение этого запроса может занять некоторое время. Рассмотрите возможность использования транзакций для управления изменениями.