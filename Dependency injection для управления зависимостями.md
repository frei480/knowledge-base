---
tags:
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞–ü–û
---

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –†–∞–∑–±–æ—Ä [[Dependency Injection –æ—Å–Ω–æ–≤—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ|Dependency Injection]] (DI) –î–ª—è –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**Dependency Injection (DI)** ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø *Inversion of Control (IoC)*. –ï–≥–æ —Å—É—Ç—å: –∫–ª–∞—Å—Å –Ω–µ —Å–æ–∑–¥–∞—ë—Ç —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –∞ –ø–æ–ª—É—á–∞–µ—Ç –∏—Ö –∏–∑–≤–Ω–µ. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–±–∫–æ–≥–æ, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ –∫–æ–¥–∞.

---

## 1. –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (Dependency)**: –õ—é–±–æ–π –≤–Ω–µ—à–Ω–∏–π –æ–±—ä–µ–∫—Ç, —Ç—Ä–µ–±—É–µ–º—ã–π –∫–ª–∞—Å—Å—É –¥–ª—è —Ä–∞–±–æ—Ç—ã (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–≥–µ—Ä, API-–∫–ª–∏–µ–Ω—Ç).
- **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ (Injection)**: –ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–ª–∞—Å—Å –∏–∑–≤–Ω–µ.
- **Inversion of Control (IoC)**: –ö–ª–∞—Å—Å –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å "–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è" –∫ –≤–Ω–µ—à–Ω–µ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.

---

## 2. –ó–∞—á–µ–º –≠—Ç–æ –ù—É–∂–Ω–æ?
- **–£—Å—Ç—Ä–∞–Ω—è–µ—Ç –∂—ë—Å—Ç–∫—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å**
  –ö–ª–∞—Å—Å—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç *–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤*, –∞ –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.
- **–£–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
  –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –º–æ–∫–∞–º–∏/—Å—Ç–∞–±–∞–º–∏.
- **–£–ª—É—á—à–∞–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
  –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –º–æ–¥—É–ª—è–º–∏.
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).

---

## 3. –°–ø–æ—Å–æ–±—ã –í–Ω–µ–¥—Ä–µ–Ω–∏—è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
### a) Constructor Injection (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä)
**–°–∞–º—ã–π –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±!**
```java
class OrderService {
  private final PaymentGateway gateway;
  private final Logger logger;

  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞
  public OrderService(PaymentGateway gateway, Logger logger) {
    this.gateway = gateway;
    this.logger = logger;
  }
  
  public void processOrder(Order order) {
    gateway.charge(order.getAmount());
    logger.log("Order processed");
  }
}
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã (–æ–±—ä–µ–∫—Ç –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ–∑ –Ω–∏—Ö)
- –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (`final` –ø–æ–ª—è)
- –ß—ë—Ç–∫–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### b) Setter Injection (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ß–µ—Ä–µ–∑ —Å–µ—Ç—Ç–µ—Ä—ã)
```java
class UserService {
  private UserRepository repository;
  
  public void setRepository(UserRepository repository) {
    this.repository = repository;
  }
}
```
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- –î–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º

### c) Interface Injection
–†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è.

---

## 4. DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è
**DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã
- –†–∞–∑—Ä–µ—à–∞–µ—Ç –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
- **Java**: Spring Framework, Google Guice
- **C#**: .NET Core DI, Autofac
- **JavaScript/TypeScript**: InversifyJS, NestJS DI
- **Python**: Dependency Injector, FastAPI DI

---

## 5. –ö–∞–∫ –†–∞–±–æ—Ç–∞–µ—Ç DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞ –ü—Ä–∏–º–µ—Ä–µ Spring)
**–®–∞–≥ 1: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```java
public interface PaymentGateway {
  void charge(double amount);
}

@Component // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
public class StripeGateway implements PaymentGateway {
  public void charge(double amount) { /* ... */ }
}
```

**–®–∞–≥ 2: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**
```java
@Service
public class OrderService {
  private final PaymentGateway gateway;
  
  // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é PaymentGateway
  public OrderService(PaymentGateway gateway) {
    this.gateway = gateway;
  }
}
```

**–®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```java
@Configuration
public class AppConfig {
  @Bean
  public PaymentGateway paymentGateway() {
    return new StripeGateway(API_KEY); // –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
  }
}
```

---

## 6. –ö–ª—é—á–µ–≤—ã–µ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DI
| –ë–µ–∑ DI | –° DI |
|--------|------|
| `OrderService service = new OrderService(new StripeGateway(), new FileLogger());` | `OrderService service = container.get(OrderService.class);` |
| –ñ—ë—Å—Ç–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å | –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | –õ–µ–≥–∫–∞—è –ø–æ–¥–º–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –º–æ–∫–∏ |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ = –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ |

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ —Å DI**:
```java
class OrderServiceTest {
  @Test
  void processOrder_ShouldChargePayment() {
    // 1. –°–æ–∑–¥–∞—ë–º –º–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    PaymentGateway mockGateway = Mockito.mock(PaymentGateway.class);
    
    // 2. –í–Ω–µ–¥—Ä—è–µ–º –º–æ–∫ –≤ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π —Å–µ—Ä–≤–∏—Å
    OrderService service = new OrderService(mockGateway, new TestLogger());
    
    // 3. –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥
    service.processOrder(new Order(100.0));
    
    // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
    Mockito.verify(mockGateway).charge(100.0);
  }
}
```

---

## 7. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–µ –¶–∏–∫–ª—ã –û–±—ä–µ–∫—Ç–æ–≤
DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É–ø—Ä–∞–≤–ª—è—é—Ç –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ –æ–±—ä–µ–∫—Ç–æ–≤:
- **Singleton**: –û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Spring)
- **Prototype**: –ù–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- **Request/Session**: –≠–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ HTTP-–∑–∞–ø—Ä–æ—Å –∏–ª–∏ —Å–µ—Å—Å–∏—é (–≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö)

---

## 8. –¢–∏–ø–∏—á–Ω—ã–µ –û—à–∏–±–∫–∏ –ü—Ä–∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ DI
1. **Service Locator –≤–º–µ—Å—Ç–æ DI**
   –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω: –∫–ª–∞—Å—Å —Å–∞–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
   ```java
   // –ü–õ–û–•–û! –°–∫—Ä—ã—Ç–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
   class OrderService {
     public void processOrder() {
       PaymentGateway gateway = Container.get(PaymentGateway.class);
     }
   }
   ```

2. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   `A ‚Üí B ‚Üí A`. –†–µ—à–µ–Ω–∏—è:
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–≤—ã–¥–µ–ª–∏—Ç—å –æ–±—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ —Ç—Ä–µ—Ç–∏–π –∫–ª–∞—Å—Å)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ setter/field injection
   - `@Lazy` –≤ Spring (—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏)

3. **Over-injection**
   –ë–æ–ª–µ–µ 4-5 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ ‚Üí –ø—Ä–∏–∑–Ω–∞–∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è SRP.

---

## 9. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Constructor Injection –≤–µ–∑–¥–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ**
2. **–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ç–∏–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**
3. **–ò–∑–±–µ–≥–∞–π—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π, –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—â–∏—Ö –∫–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É DI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É** (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
4. **–î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ "—Ä—É—á–Ω–æ–≥–æ DI"**:
   ```java
   public static void main(String[] args) {
     PaymentGateway gateway = new StripeGateway(API_KEY);
     Logger logger = new CloudLogger();
     OrderService service = new OrderService(gateway, logger);
     service.run();
   }
   ```

---

# –ò—Ç–æ–≥
**Dependency Injection** ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ "–ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", –∞ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±–æ—Ä—å–±—ã —Å –∂—ë—Å—Ç–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å—é
- üß™ –û—Å–Ω–æ–≤–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- üîß –ú–µ—Ö–∞–Ω–∏–∑–º —Å–æ–±–ª—é–¥–µ–Ω–∏—è [[SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã|SOLID-–ø—Ä–∏–Ω—Ü–∏–ø–æ–≤]]
- üåâ –ú–æ—Å—Ç –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ DI –¥–µ–ª–∞–µ—Ç –∫–æ–¥:
- **–ì–∏–±–∫–∏–º**: –ó–∞–º–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞
- **–ü–æ–Ω—è—Ç–Ω—ã–º**: –Ø–≤–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ù–∞–¥—ë–∂–Ω—ã–º**: –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–∑–æ–ª—è—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤