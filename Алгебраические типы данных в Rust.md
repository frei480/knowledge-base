---
tags:
  - rust
---
[[–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –≤ Rust]]
–ê–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (–ê–¢–î) ‚Äî –æ–¥–Ω–∞ –∏–∑ **—Å–∏–ª—å–Ω–µ–π—à–∏—Ö —Å—Ç–æ—Ä–æ–Ω Rust**, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –≤—ã—Ä–∞–∂–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –∏—Ö –¥–µ—Ç–∞–ª—å–Ω–æ.

# üìê –ß—Ç–æ –¢–∞–∫–æ–µ –ê–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∏–µ –¢–∏–ø—ã –î–∞–Ω–Ω—ã—Ö?
–ê–¢–î ‚Äî –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∏–∑ —Ç–µ–æ—Ä–∏–∏ —Ç–∏–ø–æ–≤, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è:
1. **–¢–∏–ø—ã-–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (product types)** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`struct`), –∫–æ—Ä—Ç–µ–∂–∏ (`tuple`).
2. **–¢–∏–ø—ã-—Å—É–º–º—ã (sum types)** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (`enum`).

Rust —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ê–¢–î —á–µ—Ä–µ–∑:
- `struct` (–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ–ª–µ–π)
- `enum` (–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å)
- `tuple` (–∞–Ω–æ–Ω–∏–º–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è)

---

# üß© –¢–∏–ø—ã-–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (Product Types)
## 1. –°—Ç—Ä—É–∫—Ç—É—Ä—ã (`struct`)
```rust
// –ò–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
let user1 = User {
    email: String::from("user@example.com"),
    username: String::from("username123"),
    active: true,
    sign_in_count: 1,
};
```

## 2. –ö–æ—Ä—Ç–µ–∂–Ω—ã–µ –°—Ç—Ä—É–∫—Ç—É—Ä—ã (Tuple Structs)
```rust
struct Color(u8, u8, u8);
struct Point(i32, i32, i32);

let black = Color(0, 0, 0);
let origin = Point(0, 0, 0);
```

## 3. –ï–¥–∏–Ω–∏—á–Ω–∞—è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (Unit Struct)
```rust
struct AlwaysEqual;
let subject = AlwaysEqual;
```

---

# üé≤ –¢–∏–ø—ã-—Å—É–º–º—ã (Sum Types)
## –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (`enum`)
–ì–ª–∞–≤–Ω–∞—è —Å–∏–ª–∞ Rust ‚Äî `enum`, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ:
```rust
enum WebEvent {
    PageLoad,                 // –í–∞—Ä–∏–∞–Ω—Ç –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö
    KeyPress(char),           // –û–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
    Paste(String),            // String
    Click { x: i64, y: i64 }, // –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
}
```

## –ü—Ä–∏–º–µ—Ä –° –í–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –¢–∏–ø–∞–º–∏
```rust
enum Shape {
    Circle { radius: f64 },
    Rectangle { width: f64, height: f64 },
    Triangle(Point, Point, Point), // –ö–æ—Ä—Ç–µ–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
}
```

---

# üí° –ü–æ—á–µ–º—É –ê–¢–î –í Rust –ú–æ—â–Ω—ã–µ?
## 1. –ü–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –û–±—Ä–∞–±–æ—Ç–∫–∞ –í—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
```rust
fn handle_event(event: &WebEvent) -> String {
    match event {
        WebEvent::PageLoad => "Page loaded".to_string(),
        WebEvent::KeyPress(c) => format!("Pressed key: {}", c),
        WebEvent::Paste(s) => format!("Pasted text: {}", s),
        WebEvent::Click { x, y } => format!("Clicked at ({}, {})", x, y),
    }
}
```

## 2. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è Struct + Enum
```rust
struct UiElement {
    id: String,
    position: (i32, i32),
    element_type: ElementType, // enum –≤–Ω—É—Ç—Ä–∏ struct!
}

enum ElementType {
    Button { label: String },
    TextField { placeholder: String },
    Checkbox(bool),
}
```

## 3. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –¢–∏–ø—ã (—á–µ—Ä–µ–∑ `Box`)
```rust
enum List {
    Cons(i32, Box<List>),
    Nil,
}

// –ü—Ä–∏–º–µ—Ä —Å–ø–∏—Å–∫–∞: 1 -> 2 -> 3 -> Nil
let list = Cons(1, Box::new(Cons(2, Box::new(Cons(3, Box::new(Nil))))));
```

---

# üåü –ó–Ω–∞–∫–æ–≤—ã–µ –ê–¢–î –ò–∑ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
## 1. `Option<T>` (–∏–∑–±–µ–≥–∞–µ–º `null`)
```rust
enum Option<T> {
    Some(T),
    None,
}

fn safe_division(numerator: f64, denominator: f64) -> Option<f64> {
    if denominator == 0.0 {
        None
    } else {
        Some(numerator / denominator)
    }
}
```

## 2. `Result<T, E>` (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
```rust
enum Result<T, E> {
    Ok(T),
    Err(E),
}

fn read_file(path: &str) -> Result<String, io::Error> {
    fs::read_to_string(path)
}
```

## 3. `IpAddr` (—Ä–µ–∞–ª—å–Ω—ã–π –ü—Ä–∏–º–µ—Ä –ò–∑ std)
```rust
enum IpAddr {
    V4(u8, u8, u8, u8),
    V6(String),
}

let home = IpAddr::V4(127, 0, 0, 1);
let loopback = IpAddr::V6(String::from("::1"));
```

---

# üîß –ú–µ—Ç–æ–¥—ã –î–ª—è –ê–¢–î
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –º–µ—Ç–æ–¥—ã —á–µ—Ä–µ–∑ `impl`:
```rust
impl WebEvent {
    fn log(&self) {
        match self {
            Self::PageLoad => println!("Page loaded"),
            // ... –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã ...
        }
    }
}

let event = WebEvent::KeyPress('x');
event.log();
```

---

# ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ò –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1. **–†–∞–∑–º–µ—Ä enum** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ **–Ω–∞–∏–±–æ–ª—å—à–µ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É**:
   ```rust
   // –ó–∞–Ω–∏–º–∞–µ—Ç 24 –±–∞–π—Ç–∞ (String), –¥–∞–∂–µ –¥–ª—è Empty!
   enum Data {
       Empty,
       Text(String), // String = 24 –±–∞–π—Ç–∞
   }
   ```

2. **–î–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–µ–Ω `Box`** (–∏–ª–∏ –¥—Ä—É–≥–æ–π —É–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å), —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Ä –±—ã–ª –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É.

3. **–ü–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–º**:
   ```rust
   match value {
       Some(x) => {}, // –û—à–∏–±–∫–∞! –ù–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω None
   }
   ```

---

# üí° –°–æ–≤–µ—Ç—ã –ü–æ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
1. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ `match` `if let`** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ enum** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π:
   ```rust
   enum ConnectionState {
       Disconnected,
       Connecting { attempts: u32 },
       Connected { session_id: Uuid },
   }
   ```
3. **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤** (state machines)

---

# üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –° –î—Ä—É–≥–∏–º–∏ –Ø–∑—ã–∫–∞–º–∏
| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å         | Rust            | Java/C#       | C/C++         |
|---------------------|-----------------|---------------|---------------|
| Sum types           | –î–∞ (`enum`)     | –ù–µ—Ç           | –ù–µ—Ç           |
| Pattern matching    | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π     | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π  | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç   |
| Null-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å   | `Option<T>`     | `Nullable`    | –£–∫–∞–∑–∞—Ç–µ–ª–∏     |
| –†–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö   | –í —Å—Ç–µ–∫–µ         | –ö—É—á–∞          | –ö—É—á–∞/—Å—Ç–µ–∫     |

---

# üíé –ü—Ä–∏–º–µ—Ä: –ü–∞—Ä—Å–µ—Ä JSON
```rust
enum JsonValue {
    Null,
    Boolean(bool),
    Number(f64),
    String(String),
    Array(Vec<JsonValue>),
    Object(HashMap<String, JsonValue>),
}

fn parse_json(input: &str) -> Result<JsonValue, ParseError> {
    // ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ê–¢–î ...
}
```

# üèÅ –ò—Ç–æ–≥
–ê–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ Rust ‚Äî —ç—Ç–æ:
- **–ú–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è** —á–µ—Ä–µ–∑ `enum` + `struct`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** (—Ä–∞–∑–º–µ—Ä –∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- **–Ø—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞** (—è–≤–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π)

–ê–¢–î –ª–µ–∂–∞—Ç –≤ –æ—Å–Ω–æ–≤–µ –º–Ω–æ–≥–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Rust –∏ –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ü–µ–ª—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –æ—à–∏–±–æ–∫.
–†–∞–∑–±–µ—Ä—ë–º [[–ê–¢–î –≤ Rust –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏|–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è]].