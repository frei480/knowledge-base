---
tags:
  - docker
---
Чтобы скопировать файл внутрь Docker-контейнера, есть несколько способов. Выбор зависит от того, нужно ли вам временное или постоянное решение.

---

### **1. Использование `docker cp` (для уже запущенного контейнера)**
Команда `docker cp` позволяет скопировать файлы/папки между хостом (вашей машиной) и контейнером.  
**Синтаксис**:
```bash
# Копировать с хоста в контейнер
docker cp <путь_на_хосте> <контейнер>:<путь_в_контейнере>

# Копировать из контейнера на хост
docker cp <контейнер>:<путь_в_контейнере> <путь_на_хосте>
```

**Пример**:
```bash
# Скопировать файл data.txt в папку /app контейнера с ID 3a2f1d
docker cp ./data.txt 3a2f1d:/app/data.txt

# Скопировать папку configs в контейнер
docker cp ./configs/ my_container:/app/configs/
```

**Важно**:
- Изменения, сделанные через `docker cp`, **не сохранятся при пересоздании контейнера**.
- Чтобы найти имя или ID контейнера, выполните:  
  ```bash
  docker ps -a
  ```

---

### **2. Добавление файлов через Dockerfile (постоянное решение)**
Если файлы должны быть частью образа, используйте инструкции `COPY` или `ADD` в Dockerfile.

**Пример Dockerfile**:
```Dockerfile
FROM ubuntu:latest
WORKDIR /app
COPY ./data.txt /app/data.txt  # Копирует файл с хоста в образ
COPY ./configs /app/configs    # Копирует папку
```

**Соберите образ**:
```bash
docker build -t my_image .
```

**Запустите контейнер**:
```bash
docker run -it my_image
```

**Разница между `COPY` и `ADD`**:
- `COPY` — просто копирует файлы/папки.
- `ADD` — умеет распаковывать архивы (например, `.tar`) и копировать из URL.

---

### **3. Монтирование томов (для синхронизации файлов)**
Чтобы файлы на хосте и в контейнере синхронизировались, используйте флаг `-v` при запуске контейнера.

**Пример**:
```bash
docker run -v /полный/путь/на_хосте:/путь/в/контейнере my_image
```

**Пример для текущей папки**:
```bash
docker run -v $(pwd)/data:/app/data my_image
```

**Преимущества**:
- Изменения на хосте мгновенно отображаются в контейнере.
- Идеально для разработки.

---

### **Итог**
| **Способ**       | **Когда использовать**                     | **Плюсы**                          | **Минусы**                         |
|-------------------|--------------------------------------------|-------------------------------------|-------------------------------------|
| `docker cp`       | Быстрое копирование в работающий контейнер | Простота                           | Временное решение                   |
| Dockerfile (`COPY`/`ADD`) | Создание образа с файлами          | Постоянное хранение в образе       | Требуется пересборка образа         |
| Монтирование томов | Разработка с синхронизацией файлов         | Автоматическая синхронизация       | Файлы не сохраняются в образе       |

---

### **Дополнительные советы**
- Если контейнер не запущен, `docker cp` все равно работает.
- Чтобы создать папку в контейнере перед копированием:
  ```bash
  docker exec -it my_container mkdir -p /app/configs
  ```
- Для Windows используйте полные пути в формате `C:\path\to\file`.