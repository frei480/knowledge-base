---
tags:
  - rust
---
[[–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –≤ Rust]]
# üîë –û—Å–Ω–æ–≤–Ω—ã–µ –ú–µ—Ö–∞–Ω–∏–∑–º—ã "–ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –í –≤–ª–∞–¥–µ–ª—å—Ü–∞"
## 1. **`.to_owned()`** (–∏–∑ [[Trait –≤ Rust|—Ç—Ä–µ–π—Ç–∞]] `ToOwned`)
–°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–ª–∞–¥–µ—é—â–µ–π –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö:
```rust
// –î–ª—è —Å—Ç—Ä–æ–∫
let borrowed_str: &str = "Hello";
let owned_string: String = borrowed_str.to_owned();

// –î–ª—è —Å—Ä–µ–∑–æ–≤
let slice: &[i32] = &[1, 2, 3];
let owned_vec: Vec<i32> = slice.to_owned();
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –°–æ–∑–¥–∞—ë—Ç –ø–æ–ª–Ω—É—é –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ –∫—É—á–µ
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è —Ç–∏–ø–æ–≤, —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö [[Trait –≤ Rust|—Ç—Ä–µ–π—Ç]] `Clone`
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è `&str` ‚Üí `String`

---

## 2. **`.clone()`** (–∏–∑ –¢—Ä–µ–π—Ç–∞ `Clone`)
–°–æ–∑–¥–∞—ë—Ç –≥–ª—É–±–æ–∫—É—é –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö:
```rust
let original = String::from("Hello");
let cloned = original.clone(); // –ü–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```

**–û—Ç–ª–∏—á–∏–µ –æ—Ç `to_owned()`:**

| –ú–µ—Ç–æ–¥         | –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å                | –°–µ–º–∞–Ω—Ç–∏–∫–∞                |
| ------------- | --------------------------- | ------------------------ |
| `.clone()`    | –õ—é–±–æ–π `T: Clone`            | –ì–ª—É–±–æ–∫–∞—è –∫–æ–ø–∏—è           |
| `.to_owned()` | –í –æ—Å–Ω–æ–≤–Ω–æ–º –¥–ª—è `dyn Borrow` | –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω |

---

## 3. **`into()`** (–∏–∑ –¢—Ä–µ–π—Ç–∞ `Into`)
–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–∏–ø —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ:
```rust
let s: &str = "text";
let owned: String = s.into(); // &str ‚Üí String

let v: &[i32] = &[1, 2];
let owned: Vec<i32> = v.into(); // &[T] ‚Üí Vec<T>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–µ –∫–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç [[–≤–ª–∞–¥–µ–Ω–∏–µ –∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ rust|—Å–∏—Å—Ç–µ–º—É –≤–ª–∞–¥–µ–Ω–∏—è]] Rust

---


1. **–°–µ–º–∞–Ω—Ç–∏–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è** –≤ Rust —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ—Å—Ç–∏:
   - `.to_owned()` ‚Äî "—è —Ö–æ—á—É –Ω–æ–≤—É—é –∫–æ–ø–∏—é"
   - `.clone()` ‚Äî "–∫–æ–ø–∏—Ä—É—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ"
   - `into()` ‚Äî "–ø—Ä–µ–æ–±—Ä–∞–∑—É—é —Å –≤–æ–∑–º–æ–∂–Ω—ã–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º"

2. **–ù–µ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π**:
   ```rust
   // –¢–∞–∫ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç!
   let borrowed = &42;
   let owned = borrowed.to_owner(); // –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
   
   // –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
   let owned = *borrowed; // –î–ª—è Copy-—Ç–∏–ø–æ–≤
   let owned = borrowed.clone(); // –î–ª—è Clone-—Ç–∏–ø–æ–≤
   ```

3. **–î–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:
   ```rust
   let num_ref = &5;
   let num_owned = *num_ref; // i32 —Ä–µ–∞–ª–∏–∑—É–µ—Ç Copy
   ```

---

# üõ†Ô∏è –ö–æ–≥–¥–∞ –ß—Ç–æ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
## –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°—Ç—Ä–æ–∫–∏
```rust
let input: &str = "–ü—Ä–∏–≤–µ—Ç";

// –í–∞—Ä–∏–∞–Ω—Ç 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
let s1: String = input.to_owned();

// –í–∞—Ä–∏–∞–Ω—Ç 2
let s2: String = input.into();

// –í–∞—Ä–∏–∞–Ω—Ç 3
let s3: String = input.to_string();
```

## –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¢–∏–ø—ã
```rust
#[derive(Clone)]
struct User {
    id: u64,
    name: String,
}

let user_ref = &User {
    id: 1,
    name: "Alice".to_owned(),
};

// –°–æ–∑–¥–∞—ë–º –≤–ª–∞–¥–µ—é—â—É—é –∫–æ–ø–∏—é
let user_owned = user_ref.clone();
```

---

# üîÑ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –°–ª—É—á–∞–∏
## –î–ª—è –¢–∏–ø–æ–≤, –†–µ–∞–ª–∏–∑—É—é—â–∏—Ö `Copy`
```rust
let x = 10;
let y = &x;
let z = *y; // –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ (–Ω–µ –Ω—É–∂–µ–Ω to_owned)
```

## –î–ª—è `CoW` (Copy-on-Write)
```rust
use std::borrow::Cow;

let data = "–°—Ç—Ä–æ–∫–∞";
let mut cow = Cow::Borrowed(data);

// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
cow.to_mut().push_str(" –∏–∑–º–µ–Ω—ë–Ω–Ω–∞—è");
```

---

# üí° –õ—É—á—à–∏–µ –ü—Ä–∞–∫—Ç–∏–∫–∏
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `to_owned()` –¥–ª—è &str ‚Üí String**
2. **–î–ª—è —Å—Ä–µ–∑–æ–≤ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ `to_vec()` –∏–ª–∏ `into()`**
3. **–ò–∑–±–µ–≥–∞–π—Ç–µ –ª–∏—à–Ω–∏—Ö –∫–æ–ø–∏–π** ‚Äî —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å —Å—Å—ã–ª–∫–∞–º–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
4. **–î–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–π –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–µ–π—Ç—ã `From`/`Into`
   ```rust
   impl From<&str> for MyType {
       fn from(s: &str) -> Self {
           MyType(s.to_owned())
       }
   }
   
   let my_val: MyType = "text".into();
   ```

---

# ‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–∞—è –û—à–∏–±–∫–∞
```rust
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
fn process(data: &str) -> String {
    data.to_owner() // –§—É–Ω–∫—Ü–∏–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!
}

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
fn process(data: &str) -> String {
    data.to_owned()
}
```

---